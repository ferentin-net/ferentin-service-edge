# Render Blueprint for Ferentin Service Edge
# See: https://render.com/docs/blueprint-spec

services:
  - type: web
    name: service-edge
    env: docker
    dockerfilePath: null
    # Use pre-built image
    image:
      url: ghcr.io/ferentin-net/service-edge:latest
    healthCheckPath: /actuator/health
    plan: starter
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: aws-secure
      - key: BOOTSTRAP_ENABLED
        value: "true"
      - key: ENROLLMENT_TOKEN
        sync: false  # Set in dashboard
      - key: TLS_ENABLED
        value: "true"
      - key: TLS_PORT
        value: "9443"
    # Render supports one disk per service
    # Mount to parent and use subdirectories
    disk:
      name: service-edge-storage
      mountPath: /opt/ferentin/storage
      sizeGB: 2
